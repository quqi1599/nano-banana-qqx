<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <!-- 视口配置：支持刘海屏安全区域，禁止缩放防止输入框自动放大 -->
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />

  <!-- 主题色 -->
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#030712">

  <!-- iOS Safari PWA 支持 -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="DEAI">
  <link rel="apple-touch-icon" href="/logo.png">

  <!-- 禁用 iOS 电话号码/邮箱/地址自动检测 -->
  <meta name="format-detection" content="telephone=no, email=no, address=no">
  
  <!-- 禁用 UC/QQ 浏览器自适应字体 -->
  <meta name="wap-font-scale" content="no">
  
  <!-- 禁止浏览器自动将数字转为电话号码 -->
  <meta http-equiv="x-rim-auto-match" content="none">

  <!-- ========== 微信内置浏览器优化 ========== -->
  <!-- 强制使用 X5 内核（如果可用）-->
  <meta name="x5-orientation" content="portrait">
  <meta name="x5-fullscreen" content="true">
  <meta name="x5-page-mode" content="app">
  <!-- 启用 X5 高性能模式 -->
  <meta name="x5-video-player-type" content="h5">
  <meta name="x5-video-player-fullscreen" content="true">
  <!-- 禁用微信内置浏览器调整字体大小 -->
  <meta name="x5-text-size-adjust" content="no">
  <!-- QQ/微信浏览器全屏显示 -->
  <meta name="x5-page-mode" content="no-titlebar">
  <meta name="x5-fullscreen" content="true">
  <!-- 禁止识别长按数字为电话（Android 微信） -->
  <meta name="format-detection" content="telephone=no, email=no, address=no">

  <!-- SEO 基础 -->
  <title>DEAI Banana - 免费AI画图工具 | Google Gemini 图像生成镜像</title>
  <meta name="description"
    content="DEAI Banana 是免费的 AI 画图工具镜像站，基于 Google Gemini 的智能图像生成。只需一句话描述，即可在线生成高质量图像。支持 1K/2K/4K 分辨率，无需翻墙，快速稳定。">
  <meta name="keywords"
    content="Banana画图工具,AI画图镜像,Google画图镜像,免费在线绘图镜像,AI绘图工具,Gemini图像生成,AI作图,文生图,DEAI,免费AI绘画,在线AI画图,Google Drawings镜像,Banana Google画图在线使用,免费Google绘图工具镜像,AI图像生成器,一键AI作图">
  <meta name="author" content="DEAI">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://banana2.peacedejiai.cc/">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://banana2.peacedejiai.cc/">
  <meta property="og:title" content="DEAI Banana - 免费AI画图工具 | Gemini 图像生成镜像">
  <meta property="og:description" content="免费的 AI 画图工具镜像站，基于 Google Gemini 智能图像生成。一句话描述即可在线生成高质量图像，无需翻墙。">
  <meta property="og:image" content="https://banana2.peacedejiai.cc/og-image.png">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:site_name" content="DEAI Banana">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://banana2.peacedejiai.cc/">
  <meta name="twitter:title" content="DEAI Banana - 免费AI画图工具 | Gemini 镜像">
  <meta name="twitter:description" content="免费的 AI 画图工具镜像站，基于 Google Gemini。一句话生成高质量图像，无需翻墙。">
  <meta name="twitter:image" content="https://banana2.peacedejiai.cc/og-image.png">

  <!-- 结构化数据 JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "DEAI",
    "description": "基于 Gemini AI 的智能图像生成工具，只需输入一句话描述，即可快速生成高质量图像。",
    "url": "https://banana2.peacedejiai.cc/",
    "applicationCategory": "MultimediaApplication",
    "operatingSystem": "Web",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "CNY"
    },
    "featureList": [
      "AI 图像生成",
      "多种分辨率支持 (1K/2K/4K)",
      "多种长宽比选择",
      "流式响应",
      "深色模式"
    ]
  }
  </script>

  <link rel="icon" href="/logo.png" type="image/png" />

  <!-- ========== 微信内置浏览器 CSS 兼容 ========== -->
  <style>
    /* 基础重置 - 防止微信浏览器调整字体大小 */
    body {
      -webkit-text-size-adjust: 100% !important;
      -moz-text-size-adjust: 100% !important;
      text-size-adjust: 100% !important;
    }

    /* 微信浏览器 flexbox 兼容性修复 */
    .app-loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      /* 微信浏览器 flexbox 兼容 */
      display: -webkit-box;
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
      -webkit-box-pack: center;
      -ms-flex-pack: center;
      -webkit-justify-content: center;
      justify-content: center;
      -webkit-box-align: center;
      -ms-flex-align: center;
      -webkit-align-items: center;
      align-items: center;
      background-color: #ffffff;
      z-index: 9999;
      -webkit-transition: opacity 0.3s ease-out;
      transition: opacity 0.3s ease-out;
      pointer-events: none;
    }

    /* 支持 dark 类（JS 提前应用）和系统偏好 */
    .dark .app-loading,
    html.dark .app-loading {
      background-color: #030712;
    }

    .app-loading-content {
      display: -webkit-box;
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
      -webkit-box-orient: vertical;
      -webkit-box-direction: normal;
      -ms-flex-direction: column;
      -webkit-flex-direction: column;
      flex-direction: column;
      -webkit-box-align: center;
      -ms-flex-align: center;
      -webkit-align-items: center;
      align-items: center;
      /* gap 在旧版微信浏览器不支持，使用 margin 替代 */
      gap: 1.5rem;
    }

    /* 为不支持 gap 的旧版微信浏览器提供降级方案 */
    @supports not (gap: 1rem) {
      .app-loading-content > * + * {
        margin-top: 1.5rem;
      }
    }

    .app-loading-logo {
      width: 64px;
      height: 64px;
      -webkit-animation: loading-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      animation: loading-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @-webkit-keyframes loading-pulse {
      0%, 100% {
        opacity: 1;
        -webkit-transform: scale(1);
        transform: scale(1);
      }
      50% {
        opacity: 0.8;
        -webkit-transform: scale(0.95);
        transform: scale(0.95);
      }
    }

    @keyframes loading-pulse {
      0%, 100% {
        opacity: 1;
        -webkit-transform: scale(1);
        transform: scale(1);
      }
      50% {
        opacity: 0.8;
        -webkit-transform: scale(0.95);
        transform: scale(0.95);
      }
    }

    @media (prefers-color-scheme: dark) {
      .app-loading {
        background-color: #030712;
      }
    }

    /* 防止微信浏览器长按选中 */
    .no-select {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
    }

    /* 微信浏览器隐藏滚动条但保持滚动 */
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
  </style>

  <!-- 主题初始化：防止页面加载时闪烁 + 微信浏览器检测 -->
  <script>
    (function() {
      try {
        // 检测微信/QQ浏览器
        var ua = navigator.userAgent.toLowerCase();
        var isWechat = ua.indexOf('micromessenger') > -1;
        var isQQ = ua.indexOf('qq') > -1 && ua.indexOf('mqqbrowser') > -1;
        var isWeibo = ua.indexOf('weibo') > -1;

        // 将检测结果存到 window，供后续使用
        window.__isWechatBrowser__ = isWechat;
        window.__isQQBrowser__ = isQQ;
        window.__isWeiboBrowser__ = isWeibo;
        window.__isChineseMobileBrowser__ = isWechat || isQQ || isWeibo;

        // 微信/QQ浏览器额外处理
        if (isWechat || isQQ) {
          // 添加根元素类名，便于 CSS 兼容处理
          document.documentElement.classList.add('chinese-mobile-browser');
          if (isWechat) document.documentElement.classList.add('wechat-browser');
          if (isQQ) document.documentElement.classList.add('qq-browser');
        }

        // 读取主题设置
        var stored = localStorage.getItem('nbnb-storage');
        var parsed = stored ? JSON.parse(stored) : null;
        var theme = parsed?.state?.settings?.theme || 'system';
        var isDark = theme === 'dark' ||
          (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);

        if (isDark) {
          document.documentElement.classList.add('dark');
        }

        // 微信浏览器需要手动触发 viewport 重新计算
        if (isWechat && window.document.readyState === 'loading') {
          // 微信浏览器有时需要延迟设置 viewport
          setTimeout(function() {
            var viewport = document.querySelector('meta[name="viewport"]');
            if (viewport) {
              var content = viewport.getAttribute('content');
              viewport.setAttribute('content', content);
            }
          }, 100);
        }
      } catch (e) {
        // 忽略解析错误，防止页面崩溃
        console.warn('Theme initialization failed:', e);
      }
    })();
  </script>
</head>

<body>
  <!-- SEO: 无障碍跳过链接 -->
  <a href="#root" class="sr-only" style="position:absolute;left:-9999px;">跳到主要内容</a>

  <div id="app-loading" class="app-loading">
    <div class="app-loading-content">
      <img src="/logo.png" class="app-loading-logo" alt="DEAI 加载中" />
    </div>
  </div>
  <div id="root"></div>
  <script type="module" src="/src/index.tsx"></script>
</body>

</html>